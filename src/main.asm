                device zxspectrum48

                org 0x4010

                include "labels.inc"



Start:
                ld sp, 0x5c00
                xor a
                out (0xfe), a
                ld a, 0xfe
                ld i, a 
                im 2
                jp 0x5cfa


                org 0x5c00
                db 0x20, 0x1f, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00,   0x01, 0x00, 0x00, 0x05, 0x00, 0x01, 0x00, 0x00
                db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07,   0x47, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30
                db 0x30, 0x07, 0x30, 0x35, 0x00, 0xb8, 0x12, 0xff,   0xff, 0x45, 0x58, 0x54, 0x52, 0x41, 0x85, 0x5b
                db 0x5c, 0x86, 0x42, 0x4f, 0x4e, 0x55, 0x53, 0x00,   0x42, 0x42, 0x42, 0x42, 0x42, 0x47, 0x47, 0x47
                db 0x47, 0x47, 0xcd, 0x1a, 0x83, 0x3e, 0xff, 0xcd,   0xc0, 0x5f, 0xcd, 0x06, 0xa8, 0x3e, 0x80, 0xcd
                db 0xc0, 0x5f, 0xcd, 0x3e, 0xa7, 0x21, 0x26, 0x81,   0x01, 0x0a, 0x0a, 0xc5, 0xcd, 0x68, 0x5c, 0x09
                db 0x0e, 0x0b, 0x09, 0xc1, 0x10, 0xf5, 0x18, 0x2b,   0x11, 0x13, 0x82, 0x06, 0x00, 0x13, 0x1a, 0xed
                db 0xa1, 0xc0, 0xaf, 0xb1, 0x20, 0xf7, 0x01, 0xfe,   0xf7, 0xed, 0x78, 0x1f, 0x01, 0x06, 0x0d, 0x30
                db 0x15, 0x1f, 0x01, 0x09, 0x12, 0x30, 0x0f, 0x1f,   0x01, 0x0f, 0x0e, 0x30, 0x09, 0x1f, 0x01, 0x0f
                db 0x14, 0x30, 0x03, 0x01, 0x00, 0x03, 0xed, 0x43,   0xdf, 0x69, 0x00, 0x00, 0x00, 0x21, 0x00, 0x6d
                db 0x75, 0x11, 0x01, 0x6d, 0x01, 0xff, 0x01, 0xed,   0xb0, 0x21, 0x00, 0x5c, 0x11, 0x42, 0x66, 0x01
                db 0x38, 0x00, 0xed, 0xb0, 0x21, 0xd8, 0x76, 0x06,   0x06, 0x36, 0x01, 0x23, 0x10, 0xfb, 0x21, 0x00
                db 0x5d, 0x01, 0x04, 0x48, 0x11, 0xca, 0x65, 0x3e,   0x24, 0xcd, 0x5d, 0xa6, 0x3e, 0x07, 0x32, 0x02
                db 0x5d, 0xaf, 0x32, 0xae, 0x88, 0xcd, 0x39, 0x83,   0x3e, 0x02, 0x32, 0x52, 0x84, 0xfd, 0x21, 0x00
                db 0x5d, 0xcd, 0xc3, 0x95, 0xcd, 0x65, 0x83, 0xcd,   0xeb, 0xff, 0x3e, 0x46, 0x28, 0x02, 0x3e, 0x07
                db 0xcd, 0x5a, 0x83, 0xaf, 0x32, 0x5f, 0x84, 0xc3,   0xfe, 0x8d
X5d4f equ 0x5d4f

Entry:          call X6a7b
                call X5d4f

                org 0x5d00
                db 0x3e, 0x0a, 0x21, 0x5c, 0x6b, 0x16, 0x5d, 0x01,   0x7e, 0x00, 0x1e, 0x82, 0xed, 0xb0, 0x3d, 0x20
                db 0xf6, 0x21, 0x00, 0x6f, 0xf5, 0x5f, 0xcb, 0x13,   0xb3, 0x5f, 0xcb, 0x1b, 0xb3, 0x2f, 0x77, 0x23
                db 0xf1, 0x3c, 0x20, 0xf0, 0x06, 0x0c, 0x77, 0x2c,   0xc6, 0x14, 0x10, 0xfa, 0x0e, 0x05, 0x11, 0x34
                db 0x0e, 0x06, 0x06, 0xd5, 0x3e, 0x04, 0x82, 0x57,   0x73, 0x2c, 0x72, 0x2c, 0x10, 0xf6, 0xd1, 0x3e
                db 0x10, 0x83, 0x5f, 0x0d, 0x20, 0xeb, 0x01, 0xdc,   0x24, 0xcd, 0xef, 0x70, 0xc3, 0x4d, 0x5c, 0x3e
                db 0x07, 0xcd, 0x39, 0x83, 0xfd, 0x21, 0x4d, 0x5e,   0x11, 0x90, 0x30, 0x01, 0x05, 0x08, 0xcd, 0xd2
                db 0x5d, 0xcd, 0xf1, 0x5d, 0xcd, 0xde, 0x5d, 0xcd,   0xde, 0x5d, 0x3e, 0x42, 0x32, 0x9c, 0x5a, 0xcd
                db 0xde, 0x5d, 0xcd, 0x1f, 0x83, 0x3e, 0x07, 0xcd,   0x39, 0x83, 0x21, 0x25, 0x62, 0x11, 0x82, 0x58
                db 0x01, 0x03, 0x05, 0xcd, 0x12, 0x62, 0x11, 0x08,   0x00, 0x01, 0x13, 0x07, 0xcd, 0xd2, 0x5d, 0x3e
                db 0x07, 0xd3, 0xfe, 0x21, 0x34, 0x62, 0x11, 0x82,   0x58, 0x01, 0x03, 0x05, 0xcd, 0x12, 0x62, 0x01
                db 0x00, 0x20, 0xcd, 0x33, 0x83, 0x3e, 0x00, 0xd3,   0xfe, 0xcd, 0xd5, 0x5d, 0x3e, 0x07, 0xcd, 0x39
                db 0x83, 0x21, 0x43, 0x62, 0x11, 0x28, 0x58, 0x01,   0x10, 0x0d, 0xcd, 0x12, 0x62, 0x11, 0x00, 0x0f
                db 0x01, 0x0f, 0x12, 0xcd, 0xd2, 0x5d, 0xcd, 0xd8,   0x5d, 0x26, 0x3c, 0xcd, 0x21, 0x83, 0xc2, 0x4f
                db 0x5d, 0xc9, 0xcd, 0xfb, 0x5d, 0xcd, 0xe6, 0x5d,   0xcd, 0xf1, 0x5d, 0xc3, 0x1f, 0x83, 0xcd, 0xe6
                db 0x5d, 0x26, 0x01, 0xc3, 0x21, 0x83, 0xfd, 0xe5,   0xe1, 0x01, 0x13, 0x63, 0xcd, 0xe5, 0x61, 0x18
                db 0x06, 0xfd, 0xe5, 0xe1, 0xcd, 0x7b, 0x83, 0xe5,   0xfd, 0xe1, 0xc9, 0xed, 0x53, 0x01, 0x5b, 0x3e


                org 0x5e00
                db 0x06, 0x32, 0x03, 0x5b, 0x32, 0x04, 0x5b, 0x21,   0x05, 0x5b, 0xc5, 0x1e, 0x22, 0x16, 0x24, 0x3e
                db 0x23, 0xcd, 0x34, 0x5e, 0x36, 0xff, 0x23, 0xc1,   0x0d, 0x0d, 0xc5, 0xcd, 0x3f, 0x5e, 0xc1, 0x0d
                db 0x20, 0xf8, 0x1e, 0x27, 0x16, 0x29, 0x3e, 0x28,   0xcd, 0x34, 0x5e, 0x36, 0x00, 0x21, 0x01, 0x5b
                db 0xcd, 0x7b, 0x83, 0xc9, 0x05, 0x05, 0x73, 0x23,   0x77, 0x23, 0x10, 0xfc, 0x72, 0x23, 0xc9, 0x05
                db 0x05, 0x36, 0x25, 0x23, 0x70, 0x23, 0x36, 0x25,   0x23, 0x36, 0xff, 0x23, 0xc9, 0x98, 0x32, 0xce
                db 0xcf, 0xd0, 0xd1, 0xd2, 0x01, 0xff, 0xd3, 0xd4,   0xd5, 0xd6, 0xd7, 0xd8, 0xff, 0xd9, 0xda, 0xdb
                db 0xdc, 0xdd, 0xde, 0x00, 0x60, 0x02, 0x07, 0x47,   0x46, 0x4f, 0x52, 0x20, 0x31, 0x30, 0x30, 0x30
                db 0x30, 0x20, 0x59, 0x45, 0x41, 0x52, 0x53, 0x20,   0x48, 0x45, 0x20, 0x53, 0x4c, 0x45, 0x50, 0x54
                db 0x2e, 0xff, 0x48, 0x49, 0x53, 0x20, 0x4d, 0x49,   0x4e, 0x44, 0x20, 0x46, 0x45, 0x45, 0x44, 0x49
                db 0x4e, 0x47, 0x2e, 0x2e, 0x2e, 0xff, 0x4f, 0x4e,   0x20, 0x54, 0x48, 0x45, 0x20, 0x4e, 0x49, 0x47
                db 0x48, 0x54, 0x4d, 0x41, 0x52, 0x45, 0x53, 0x20,   0x4f, 0x46, 0x20, 0x54, 0x48, 0x45, 0x20, 0x57
                db 0x45, 0x41, 0x4b, 0x2e, 0x00, 0x60, 0x02, 0x07,   0x47, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0x20, 0x20, 0xff, 0x4e, 0x4f, 0x57, 0x20, 0x48,   0x45, 0x20, 0x48, 0x41, 0x53, 0x20, 0x41, 0x57
                db 0x41, 0x4b, 0x45, 0x4e, 0x45, 0x44, 0xff, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20

                org 0x5f00
                db 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x98, 0x34,   0xcf, 0xd0, 0xd1, 0xff, 0xdf, 0xe0, 0xe1, 0x00
                db 0x98, 0x34, 0xe2, 0xe3, 0xe4, 0xff, 0xe5, 0xe6,   0xe7, 0x00, 0x98, 0x34, 0xe8, 0xe9, 0xea, 0xff
                db 0xeb, 0xec, 0xed, 0x00, 0x20, 0x04, 0x01, 0x02,   0x01, 0xff, 0x03, 0x04, 0x05, 0xff, 0x06, 0x07
                db 0x08, 0xff, 0x09, 0x0a, 0x0b, 0xff, 0x0c, 0x0d,   0x0e, 0xff, 0x0f, 0x10, 0x11, 0xff, 0x01, 0x12
                db 0x01, 0xff, 0x01, 0x12, 0x01, 0xff, 0x13, 0x14,   0x15, 0xff, 0x16, 0x17, 0x18, 0xff, 0x01, 0x19
                db 0x01, 0xff, 0x01, 0x1a, 0x01, 0x00, 0x40, 0x0e,   0x07, 0x47, 0x41, 0x53, 0x20, 0x54, 0x48, 0x45
                db 0x20, 0x4e, 0x49, 0x47, 0x48, 0x54, 0x20, 0x42,   0x4c, 0x45, 0x44, 0x20, 0x43, 0x52, 0x49, 0x4d
                db 0x53, 0x4f, 0x4e, 0xff, 0x54, 0x48, 0x45, 0x20,   0x46, 0x49, 0x52, 0x45, 0x42, 0x4c, 0x41, 0x44
                db 0x45, 0x20, 0x53, 0x48, 0x41, 0x54, 0x54, 0x45,   0x52, 0x45, 0x44, 0xff, 0x41, 0x4e, 0x44, 0x20
                db 0x49, 0x54, 0x53, 0x20, 0x50, 0x4f, 0x57, 0x45,   0x52, 0x20, 0x44, 0x49, 0x45, 0x44, 0x2e, 0x00
                db 0x20, 0x04, 0x01, 0x02, 0x01, 0xff, 0x03, 0x1b,   0x05, 0xff, 0x06, 0x1c, 0x08, 0xff, 0x09, 0x1d
                db 0x0b, 0xff, 0x1e, 0x1f, 0x0e, 0xff, 0x20, 0x21,   0x22, 0xff, 0x23, 0x24, 0x25, 0xff, 0x26, 0x27
                db 0x28, 0xff, 0x29, 0x2a, 0x2b, 0xff, 0x2c, 0x2d,   0x2e, 0xff, 0x01, 0x2f, 0x01, 0xff, 0x01, 0x30
                db 0x01, 0x00, 0x40, 0x0e, 0x07, 0x47, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xff
                db 0x54, 0x48, 0x45, 0x4e, 0x20, 0x54, 0x48, 0x45,   0x20, 0x53, 0x4c, 0x41, 0x55, 0x47, 0x48, 0x54

                org 0x6000
                db 0x45, 0x52, 0x20, 0x42, 0x45, 0x47, 0x41, 0x4e,   0x2e, 0xff, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x08, 0x10
                db 0x31, 0x32, 0x10, 0x33, 0x34, 0x35, 0x36, 0x37,   0x38, 0x39, 0x3a, 0x3b, 0x3c, 0x3d, 0x3e, 0x3f
                db 0xff, 0x40, 0x41, 0x42, 0x43, 0x44, 0x45, 0x01,   0x46, 0x47, 0x48, 0x49, 0x4a, 0x4b, 0x4c, 0x10
                db 0x10, 0xff, 0x4d, 0x4e, 0x4f, 0x01, 0x01, 0x01,   0x01, 0x01, 0x01, 0x50, 0x51, 0x52, 0x10, 0x10
                db 0x53, 0x54, 0xff, 0x55, 0x56, 0x01, 0x57, 0x58,   0x59, 0x5a, 0x01, 0x01, 0x01, 0x5b, 0x5c, 0x5d
                db 0x5e, 0x5f, 0x60, 0xff, 0x61, 0x62, 0x63, 0x64,   0x65, 0x66, 0x67, 0x68, 0x69, 0x01, 0x6a, 0x6b
                db 0x6c, 0x10, 0x10, 0x10, 0xff, 0x6d, 0x6e, 0x6f,   0x70, 0x71, 0x72, 0x73, 0x74, 0x75, 0x76, 0x77
                db 0x78, 0x79, 0x7a, 0x7b, 0x7c, 0xff, 0x7d, 0x7e,   0x7f, 0x80, 0x81, 0x82, 0x83, 0x84, 0x85, 0x86
                db 0x87, 0x88, 0x89, 0x8a, 0x8b, 0x8c, 0xff, 0x8d,   0x8e, 0x8f, 0x90, 0x91, 0x92, 0x92, 0x92, 0x92
                db 0x93, 0x94, 0x95, 0x96, 0x97, 0x98, 0x99, 0xff,   0x10, 0x10, 0x10, 0x9a, 0x9b, 0x9c, 0x92, 0x92
                db 0x92, 0x9d, 0x01, 0x9e, 0x9f, 0xa0, 0xa1, 0xa2,   0xff, 0xa3, 0xa4, 0xa5, 0xa6, 0xa7, 0xa8, 0xa9
                db 0x92, 0x92, 0xaa, 0xab, 0xac, 0xad, 0xae, 0x01,   0xaf, 0xff, 0xb0, 0xb1, 0xb2, 0xb3, 0xb4, 0xb5
                db 0xb6, 0x92, 0xb7, 0xb8, 0xb9, 0xba, 0xbb, 0xbc,   0x01, 0x01, 0xff, 0x01, 0x01, 0x01, 0x01, 0x01
                db 0xbd, 0xbe, 0xbf, 0xc0, 0xc1, 0xc2, 0xc3, 0x10,   0xc4, 0x01, 0xc5, 0xff, 0x01, 0x01, 0x01, 0x01
                db 0x01, 0x01, 0xc6, 0xc7, 0xc8, 0xc9, 0xca, 0xcb,   0xcc, 0x01, 0x01, 0xcd, 0x00, 0x90, 0x00, 0x07

                org 0x6100
                db 0x47, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x54, 0x48, 0x45, 0x59
                db 0x20, 0x4e, 0x45, 0x56, 0x45, 0x52, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0xff, 0x20, 0x20, 0x20, 0x20, 0x54, 0x48, 0x4f,   0x55, 0x47, 0x48, 0x54, 0x20, 0x48, 0x45, 0x20
                db 0x57, 0x4f, 0x55, 0x4c, 0x44, 0x20, 0x52, 0x45,   0x54, 0x55, 0x52, 0x4e, 0x2e, 0x20, 0x20, 0x20
                db 0xff, 0x4e, 0x4f, 0x57, 0x20, 0x48, 0x41, 0x56,   0x4f, 0x4b, 0x20, 0x52, 0x45, 0x49, 0x47, 0x4e
                db 0x53, 0x20, 0x54, 0x48, 0x45, 0x20, 0x55, 0x4e,   0x44, 0x45, 0x52, 0x43, 0x49, 0x54, 0x59, 0x2e
                db 0x00, 0x90, 0x00, 0x07, 0x47, 0x20, 0x20, 0x20,   0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0x49, 0x20, 0x41, 0x4d, 0x20, 0x48, 0x49, 0x52,   0x4f, 0x2c, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20
                db 0x20, 0x20, 0x20, 0x20, 0xff, 0x20, 0x54, 0x48,   0x45, 0x20, 0x4c, 0x41, 0x53, 0x54, 0x20, 0x4f
                db 0x46, 0x20, 0x54, 0x48, 0x45, 0x20, 0x42, 0x4c,   0x41, 0x44, 0x45, 0x4b, 0x4e, 0x49, 0x47, 0x48
                db 0x54, 0x53, 0x2e, 0x20, 0xff, 0x20, 0x49, 0x20,   0x4d, 0x55, 0x53, 0x54, 0x20, 0x52, 0x45, 0x42
                db 0x55, 0x49, 0x4c, 0x44, 0x20, 0x54, 0x48, 0x45,   0x20, 0x46, 0x49, 0x52, 0x45, 0x42, 0x4c, 0x41
                db 0x44, 0x45, 0x2c, 0x20, 0xff, 0x20, 0x20, 0x20,   0x20, 0x20, 0x41, 0x4e, 0x44, 0x20, 0x42, 0x52
                db 0x49, 0x4e, 0x47, 0x20, 0x54, 0x48, 0x45, 0x20,   0x44, 0x41, 0x57, 0x4e, 0x2e, 0x2e, 0x2e, 0x20
                db 0x20, 0x20, 0x20, 0x20, 0x00, 0xc5, 0x46, 0x23,   0x4e, 0xe5, 0xcd, 0xcd, 0x83, 0xe1, 0xc1, 0x23
                db 0x7e, 0x23, 0xb7, 0xc8, 0xc5, 0xe5, 0x3c, 0x28,   0x10, 0x3d, 0x3d, 0x26, 0x00, 0x6f, 0x29, 0x29

                org 0x6200
                db 0x29, 0x09, 0xcd, 0xf9, 0x83, 0xe1, 0xc1, 0x18,   0xe7, 0xed, 0x4b, 0xc6, 0x83, 0xcd, 0xcd, 0x83
                db 0x18, 0xf3, 0xc5, 0xd5, 0x06, 0x00, 0xed, 0xb0,   0xd1, 0x3e, 0x20, 0x83, 0x5f, 0x3e, 0x00, 0x8a
                db 0x57, 0xc1, 0x10, 0xee, 0xc9, 0x07, 0x42, 0x07,   0x07, 0x43, 0x07, 0x46, 0x43, 0x46, 0x46, 0x46
                db 0x46, 0x46, 0x07, 0x46, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07
                db 0x07, 0x07, 0x07, 0x17, 0x17, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x17, 0x17, 0x17
                db 0x17, 0x17, 0x17, 0x17, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07
                db 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x17, 0x07
                db 0x07, 0x17, 0x17, 0x07, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x17, 0x17
                db 0x17, 0x17, 0x17, 0x07, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x17, 0x07
                db 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x17
                db 0x17, 0x07, 0x07, 0x17, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x17
                db 0x07, 0x07, 0x07, 0x17, 0x17, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07
                db 0x07, 0x07, 0x07, 0x17, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07
                db 0x07, 0x07, 0x07, 0x07, 0x17, 0x17, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07
                db 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07
                db 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07

                org 0x6300
                db 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,   0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07
                db 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
                db 0x74, 0xfa, 0xfa, 0x00, 0x00, 0x00, 0x00, 0x00,   0x02, 0x02, 0x02, 0x74, 0x28, 0x74, 0x74, 0x74
                db 0x28, 0x74, 0x74, 0x00, 0x00, 0x00, 0x00, 0x00,   0x80, 0x80, 0x80, 0x02, 0x02, 0x02, 0x02, 0x03
                db 0x03, 0x01, 0x04, 0x74, 0x28, 0x74, 0x74, 0x75,   0xbb, 0xf7, 0xf6, 0x80, 0x80, 0x80, 0x80, 0x80
                db 0x80, 0x00, 0x40, 0x06, 0x03, 0x02, 0x01, 0x00,   0x03, 0x07, 0x06, 0x74, 0xab, 0x74, 0xf7, 0x38
                db 0xff, 0xff, 0x00, 0xc0, 0x80, 0x80, 0x00, 0x00,   0x80, 0xc0, 0xc0, 0x04, 0x04, 0x04, 0x04, 0x04
                db 0x04, 0x04, 0x01, 0x7c, 0x7c, 0x7c, 0xfe, 0xfe,   0xfe, 0xfe, 0xff, 0x40, 0x40, 0x40, 0x40, 0x40
                db 0x40, 0x40, 0x00, 0x01, 0x03, 0x07, 0x1f, 0x07,   0x03, 0x01, 0x01, 0xff, 0xff, 0xff, 0xff, 0xff
                db 0xff, 0xff, 0xff, 0x00, 0x80, 0xc0, 0xf0, 0xc0,   0x80, 0x00, 0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe
                db 0xfe, 0xfe, 0xfe, 0x00, 0x01, 0x01, 0x03, 0x07,   0x0f, 0x7f, 0x0f, 0xfe, 0xff, 0xff, 0xff, 0xff
                db 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x80, 0xc0,   0xe0, 0xfc, 0xe0, 0x07, 0x03, 0x01, 0x01, 0x00
                db 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xfe,   0xfe, 0x7c, 0x7c, 0xc0, 0x80, 0x00, 0x00, 0x00
                db 0x00, 0x00, 0x00, 0x7c, 0x7c, 0x7c, 0x38, 0x38,   0x38, 0x38, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10
                db 0x10, 0x10, 0x00, 0x64, 0x28, 0x74, 0x74, 0x74,   0x28, 0x74, 0x54, 0x64, 0x28, 0x74, 0x74, 0x75
                db 0xbb, 0xf7, 0xf2, 0x64, 0xa3, 0x74, 0xf7, 0x38,   0xff, 0xff, 0x00, 0x04, 0x04, 0x04, 0x04, 0x04

                org 0x6400
                db 0x04, 0x04, 0x00, 0x7c, 0x7c, 0x7c, 0x3c, 0x5c,   0x7c, 0x6c, 0x74, 0x00, 0x00, 0x00, 0x00, 0x02
                db 0x00, 0x00, 0x00, 0x78, 0x74, 0x74, 0x7c, 0x3c,   0x7c, 0x7c, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00
                db 0x38, 0x18, 0x08, 0x40, 0x60, 0x60, 0x72, 0x70,   0x78, 0x78, 0x60, 0x7c, 0x3c, 0x18, 0x00, 0x81
                db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x88,   0x80, 0x80, 0x00, 0x60, 0x40, 0x00, 0x00, 0x00
                db 0x04, 0x00, 0x00, 0x02, 0x02, 0x04, 0x06, 0x0e,   0x1e, 0x0e, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00
                db 0x20, 0x00, 0x00, 0x00, 0x10, 0x18, 0x1c, 0x00,   0x00, 0x00, 0x00, 0x46, 0x62, 0x60, 0x70, 0x78
                db 0x7c, 0x7c, 0x7c, 0x00, 0x20, 0x10, 0x00, 0x00,   0x00, 0x00, 0x00, 0x20, 0x30, 0x30, 0x20, 0x00
                db 0x00, 0x00, 0x00, 0x3c, 0x10, 0x00, 0x00, 0x00,   0x20, 0x60, 0x70, 0x00, 0x0c, 0x0c, 0x1c, 0x0c
                db 0x0c, 0x04, 0x00, 0x78, 0x7c, 0x7c, 0x7c, 0x7c,   0x7c, 0x38, 0x38, 0x38, 0x10, 0x10, 0x00, 0x00
                db 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x77,   0xff, 0x55, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
                db 0xff, 0xef, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,   0xff, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf5
                db 0xff, 0x00, 0x7e, 0xff, 0xff, 0xd1, 0xec, 0x55,   0xff, 0x01, 0x00, 0xff, 0xff, 0x5f, 0x7d, 0x15
                db 0x80, 0x40, 0x00, 0xff, 0xff, 0xf0, 0xe7, 0x44,   0x81, 0x05, 0x00, 0xff, 0xff, 0x7f, 0xff, 0x57
                db 0xff, 0x55, 0x01, 0xff, 0xff, 0xff, 0xff, 0xf5,   0xff, 0x55, 0xaa, 0xff, 0xff, 0xf5, 0xff, 0x55
                db 0xfa, 0x55, 0xab, 0xd5, 0xff, 0x55, 0xff, 0x55,   0xbb, 0x55, 0xff, 0xdf, 0xff, 0x55, 0xff, 0x55
                db 0xff, 0x55, 0xff, 0xff, 0xff, 0x7f, 0xff, 0x55,   0xff, 0x57, 0xff, 0xff, 0xff, 0xff, 0xff, 0x5e

                org 0x6500
                db 0xff, 0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfb,   0xff, 0xff, 0xff, 0x55, 0xff, 0x55, 0xef, 0x55
                db 0xab, 0x55, 0xfe, 0x57, 0xff, 0x55, 0xff, 0x58,   0xb2, 0x55, 0xaa, 0xff, 0xff, 0x55, 0x80, 0x10
                db 0xe0, 0x0c, 0x80, 0xd5, 0xff, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x55, 0xf0, 0x00, 0x00, 0x00
                db 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00
                db 0x00, 0x00, 0x00, 0x54, 0x1f, 0x01, 0x00, 0x05,   0x01, 0x00, 0x00, 0x55, 0xbf, 0x55, 0x7f, 0x1d
                db 0xff, 0x7f, 0x3f, 0x55, 0xff, 0x55, 0xff, 0xff,   0xff, 0xff, 0xff, 0x55, 0xff, 0x77, 0xff, 0xff
                db 0xff, 0xff, 0xff, 0x55, 0xff, 0xff, 0xff, 0xff,   0xff, 0xff, 0xff, 0xdf, 0xff, 0xff, 0xff, 0xff
                db 0xff, 0xff, 0xff, 0x55, 0xff, 0x54, 0xf1, 0x55,   0xff, 0xdf, 0xff, 0x50, 0x00, 0x05, 0xff, 0x55
                db 0xfc, 0xf0, 0xf0, 0x00, 0x00, 0x50, 0xc0, 0x00,   0x00, 0x00, 0x80, 0x1f, 0x07, 0x01, 0x01, 0x00
                db 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x7f,   0x7f, 0x55, 0x3f, 0xff, 0xff, 0xff, 0xff, 0xff
                db 0xff, 0x7b, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,   0xff, 0xbd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfd
                db 0xff, 0x55, 0xff, 0xff, 0xff, 0xf7, 0xff, 0x55,   0xfe, 0x50, 0xe0, 0xc5, 0x9c, 0x50, 0xc0, 0x00
                db 0x00, 0x22, 0x8c, 0x00, 0x00, 0x00, 0x00, 0x00,   0x03, 0x04, 0x08, 0x00, 0x00, 0x00, 0x00, 0xc0
                db 0x20, 0x21, 0x21, 0x00, 0x00, 0x40, 0x7c, 0x84,   0x84, 0x08, 0x08, 0x00, 0x00, 0x00, 0x00, 0x40
                db 0x40, 0xc0, 0xc0, 0x15, 0x1f, 0x05, 0x0f, 0x05,   0x22, 0x11, 0x0a, 0x55, 0xff, 0x55, 0xaa, 0x55
                db 0xaa, 0x55, 0xaf, 0x55, 0xff, 0x55, 0xab, 0x55,   0xef, 0x55, 0xff, 0x55, 0xff, 0x55, 0xbb, 0x55

                org 0x6600
                db 0xff, 0x55, 0xff, 0x55, 0xff, 0x55, 0xff, 0x55,   0xff, 0x55, 0xff, 0x55, 0xff, 0x55, 0xff, 0x57
                db 0xff, 0x7f, 0xff, 0x00, 0x0c, 0x51, 0xb2, 0x45,   0xaa, 0x54, 0xac, 0x10, 0xb0, 0x40, 0x80, 0x00
                db 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x09, 0x15,   0x25, 0x42, 0x81, 0x08, 0x08, 0x08, 0x08, 0x09
                db 0x8c, 0x88, 0x84, 0x21, 0x22, 0x12, 0x52, 0x11,   0x09, 0x04, 0xa3, 0x08, 0x09, 0x09, 0x09, 0x04
                db 0x02, 0x81, 0x40, 0xc8, 0x4e, 0x46, 0x25, 0x94,   0x52, 0x4a, 0xa4, 0x80, 0xc1, 0xa1, 0x50, 0x8c
                db 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x42,   0xe2, 0x19, 0x05, 0x05, 0x0a, 0x05, 0x06, 0x01
                db 0x01, 0x00, 0xf0, 0x55, 0xbf, 0x55, 0xff, 0x5d,   0xff, 0x5f, 0x3f, 0x5d, 0xff, 0x77, 0xff, 0xff
                db 0xff, 0xff, 0xff, 0x50, 0xf8, 0x51, 0xf1, 0x51,   0xe7, 0xe5, 0xef, 0x41, 0xc1, 0x40, 0xc2, 0x05
                db 0x87, 0x05, 0x8f, 0x03, 0x0e, 0x18, 0x30, 0x03,   0x07, 0x0e, 0x19, 0x87, 0x86, 0x42, 0xe2, 0xd1
                db 0x11, 0x79, 0xe4, 0x80, 0x01, 0x08, 0x60, 0xc0,   0x01, 0x0a, 0x95, 0x80, 0x00, 0x00, 0x05, 0x2a
                db 0x54, 0xa8, 0x40, 0x40, 0x15, 0xa0, 0x41, 0x00,   0x00, 0x02, 0x03, 0xaa, 0x50, 0x02, 0x55, 0x2a
                db 0x55, 0x2a, 0x55, 0xaa, 0x15, 0xaa, 0x55, 0xaa,   0x55, 0xaa, 0x55, 0x01, 0x00, 0x80, 0x40, 0x82
                db 0x41, 0xa2, 0x51, 0xf8, 0x84, 0x22, 0x50, 0x2a,   0x05, 0x02, 0x41, 0x5f, 0x7f, 0x1f, 0x1f, 0x07
                db 0x27, 0x11, 0x1f, 0xff, 0xff, 0xfd, 0xff, 0xb5,   0xff, 0x55, 0xff, 0xff, 0xff, 0x55, 0xff, 0x55
                db 0xff, 0x55, 0xea, 0xfe, 0xff, 0x55, 0xff, 0x55,   0xff, 0x40, 0x95, 0xf5, 0xff, 0x55, 0xff, 0x55
                db 0x07, 0xa1, 0x64, 0x4f, 0xef, 0x55, 0xff, 0x55,   0xaf, 0x55, 0xea, 0x8f, 0x8f, 0x1f, 0x9f, 0x15

                org 0x6700
                db 0x9f, 0x55, 0x8e, 0x03, 0x87, 0x8c, 0x80, 0x41,   0xc3, 0x47, 0xaa, 0x83, 0x04, 0x1f, 0x7f, 0xff
                db 0xf1, 0x80, 0x00, 0x2a, 0x95, 0xa0, 0x40, 0xa0,   0xd0, 0xaa, 0xd5, 0x80, 0x01, 0x00, 0x08, 0x04
                db 0x20, 0x7f, 0x45, 0x63, 0xc2, 0x07, 0x06, 0x0e,   0x3d, 0xd2, 0x05, 0x2a, 0x54, 0x20, 0x45, 0x8a
                db 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa,   0x55, 0xaa, 0x55, 0xa8, 0x50, 0xa8, 0x54, 0xaa
                db 0x55, 0xaa, 0x55, 0xa8, 0x14, 0x2a, 0x14, 0x08,   0x00, 0x80, 0x00, 0x05, 0x07, 0x01, 0x08, 0x04
                db 0x0e, 0x05, 0x07, 0x55, 0xfe, 0x55, 0xff, 0x55,   0x7e, 0x5d, 0x7b, 0x54, 0xa9, 0x43, 0x97, 0x7f
                db 0xff, 0xff, 0xfe, 0x5f, 0x7f, 0xfe, 0xfc, 0xf8,   0xb1, 0x62, 0xa1, 0xc9, 0x94, 0x29, 0x54, 0xa9
                db 0x53, 0xa8, 0x51, 0x55, 0xff, 0x55, 0xff, 0xd5,   0xff, 0xef, 0xff, 0x55, 0xca, 0x55, 0xef, 0x55
                db 0xff, 0x55, 0xff, 0x40, 0xa0, 0x40, 0xe0, 0x50,   0xf8, 0xec, 0xfe, 0x00, 0x01, 0x61, 0x41, 0x05
                db 0x8a, 0x45, 0x3a, 0x6a, 0x55, 0x6a, 0x55, 0x6a,   0x55, 0x6a, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa
                db 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa,   0x54, 0xa9, 0x52, 0x80, 0x00, 0x80, 0x00, 0x00
                db 0x00, 0x00, 0x00, 0x01, 0x23, 0x01, 0x09, 0x00,   0x04, 0x03, 0x00, 0x77, 0xef, 0x5d, 0x3b, 0x15
                db 0xaa, 0x15, 0x2a, 0xf5, 0xea, 0xd0, 0xa3, 0x47,   0x9f, 0x15, 0x7f, 0x40, 0x04, 0x43, 0xe5, 0xe2
                db 0xe5, 0xf0, 0xf1, 0xa3, 0x1f, 0xff, 0xff, 0xff,   0x7f, 0xaf, 0x55, 0x05, 0x8b, 0xc7, 0xef, 0xe7
                db 0xe7, 0xe7, 0xf3, 0x6a, 0x55, 0x4a, 0x15, 0x6a,   0x74, 0xb8, 0xc5, 0xaa, 0x55, 0xaa, 0x55, 0x0a
                db 0x55, 0x8a, 0x15, 0xa0, 0x54, 0xa8, 0x50, 0xa2,   0x44, 0xaa, 0x44, 0x00, 0x00, 0x04, 0x02, 0x20

                org 0x6800
                db 0x00, 0x11, 0x09, 0x44, 0x08, 0x01, 0x07, 0x15,   0x3e, 0x15, 0x9a, 0x5f, 0xf0, 0x50, 0xf0, 0x50
                db 0xb0, 0x50, 0xb0, 0xf0, 0x1e, 0x05, 0x07, 0x07,   0x07, 0x07, 0x07, 0x22, 0x00, 0x57, 0xff, 0xff
                db 0xff, 0xff, 0xff, 0xef, 0xff, 0x55, 0xff, 0x7d,   0xc7, 0xc7, 0xc7, 0x55, 0xff, 0x55, 0xff, 0x7f
                db 0xff, 0xff, 0xea, 0x57, 0xff, 0x55, 0xff, 0xd5,   0xff, 0xff, 0xff, 0x73, 0xf9, 0x51, 0xfc, 0x54
                db 0xfe, 0xff, 0xff, 0xf8, 0xfd, 0xff, 0xff, 0xff,   0x7f, 0x3f, 0x9f, 0xaa, 0x55, 0xea, 0xf8, 0xe2
                db 0xdd, 0xfe, 0xff, 0xaa, 0x55, 0x0a, 0x55, 0xaa,   0x55, 0xaa, 0x55, 0xa8, 0x54, 0xa8, 0x50, 0xa0
                db 0x40, 0x8a, 0x01, 0x00, 0x40, 0x00, 0x00, 0xa1,   0x50, 0xaa, 0x55, 0x04, 0x82, 0x41, 0x04, 0x04
                db 0xc0, 0x40, 0x00, 0x9d, 0x07, 0x03, 0x0b, 0x05,   0x05, 0x0d, 0x3b, 0x50, 0xf0, 0x60, 0xc0, 0x80
                db 0x80, 0x80, 0x80, 0xd6, 0x7f, 0x55, 0x60, 0x00,   0x00, 0x00, 0x00, 0xc7, 0xc7, 0x05, 0x03, 0x00
                db 0x00, 0x00, 0x00, 0x55, 0xff, 0x7c, 0xc0, 0x00,   0x00, 0x00, 0x00, 0x55, 0xff, 0x55, 0x3f, 0x00
                db 0x00, 0x00, 0x00, 0x55, 0xfa, 0xd5, 0x2f, 0x00,   0x00, 0x00, 0x00, 0x4f, 0xa7, 0x53, 0xf9, 0x04
                db 0x02, 0x01, 0x00, 0xff, 0xff, 0xff, 0xfe, 0xff,   0x7f, 0x3f, 0x9f, 0xaa, 0x45, 0x8a, 0x15, 0x2a
                db 0xd5, 0xaa, 0xd5, 0xaa, 0x54, 0xa8, 0x50, 0xa2,   0x40, 0x82, 0x40, 0x2a, 0x05, 0x2a, 0x15, 0xaa
                db 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x54, 0xa0,   0x40, 0x81, 0x03, 0x00, 0x01, 0x02, 0x0c, 0x31
                db 0x42, 0x84, 0x08, 0x71, 0xe2, 0x41, 0x8a, 0x17,   0x2f, 0x7f, 0xff, 0x00, 0x00, 0x75, 0xfe, 0xfd
                db 0xfe, 0xfe, 0xfc, 0x4f, 0x2f, 0x27, 0x13, 0x09,   0x04, 0x02, 0x01, 0xea, 0xf5, 0xfa, 0xfd, 0xff

                org 0x6900
                db 0xff, 0x7f, 0x1f, 0xaa, 0x55, 0xaa, 0x54, 0xa8,   0xf0, 0xc0, 0x00, 0x8a, 0x01, 0x0a, 0x01, 0xaa
                db 0x04, 0xa8, 0x10, 0xa8, 0x50, 0xa0, 0x40, 0x80,   0x01, 0x07, 0x0c, 0x06, 0x1c, 0x30, 0x60, 0xc3
                db 0x86, 0x0c, 0x18, 0x11, 0x23, 0x47, 0x8f, 0x1f,   0x3f, 0x7f, 0xbf, 0xfc, 0xf8, 0xf0, 0xf0, 0xe0
                db 0xc0, 0x80, 0x80, 0x01, 0x01, 0x03, 0x03, 0x07,   0x03, 0x07, 0x0f, 0xc0, 0x3f, 0x01, 0x01, 0x02
                db 0x0d, 0x13, 0x2e, 0x02, 0x00, 0x80, 0xc0, 0xc0,   0x84, 0x00, 0x10, 0xa0, 0x00, 0x80, 0x01, 0x03
                db 0x06, 0x0c, 0x38, 0x18, 0x70, 0xc1, 0x82, 0x05,   0x0a, 0x55, 0xaa, 0x71, 0xe2, 0x45, 0xa3, 0x45
                db 0x8b, 0x15, 0x0a, 0x7f, 0xff, 0xff, 0xff, 0xff,   0xff, 0xff, 0xbe, 0xff, 0xff, 0xfe, 0xfa, 0xf4
                db 0xe8, 0xd4, 0xa8, 0x07, 0x0f, 0x17, 0x0f, 0x1f,   0x2f, 0x1f, 0x2f, 0x54, 0xbe, 0x2d, 0x03, 0x20
                db 0x70, 0x78, 0x3c, 0x7f, 0xea, 0x40, 0x05, 0x2a,   0x5f, 0x3f, 0x7f, 0xff, 0xaf, 0x05, 0x50, 0xaa
                db 0xfd, 0xff, 0xff, 0xaa, 0xfe, 0xff, 0xbf, 0x2f,   0x4b, 0xa2, 0xf4, 0x2a, 0x84, 0xa0, 0xd0, 0xe8
                db 0xf4, 0xf8, 0xbc, 0xb8, 0xd6, 0xcd, 0x46, 0xcf,   0x67, 0xeb, 0x75, 0x3f, 0x4f, 0x33, 0x9c, 0x4f
                db 0xa5, 0xd8, 0xf5, 0xff, 0xff, 0xff, 0x7f, 0x80,   0xff, 0xaa, 0x00, 0xfa, 0xfd, 0xfc, 0xe2, 0x1c
                db 0xf8, 0xa2, 0x15, 0x58, 0x30, 0x08, 0x3a, 0x71,   0xf2, 0xe5, 0xca, 0x00, 0x00, 0x00, 0x00, 0x00
                db 0x80, 0x40, 0xa0, 0xba, 0x7d, 0x3e, 0x5f, 0x2f,   0x97, 0x4a, 0xa5, 0xfe, 0x5f, 0x2b, 0x85, 0xf0
                db 0xfe, 0xff, 0x5b, 0xaa, 0xff, 0xff, 0x7f, 0xaa,   0x00, 0xff, 0x55, 0xaf, 0xfd, 0xfa, 0xd0, 0xa3
                db 0x0d, 0xfa, 0x54, 0x9f, 0x3f, 0x7f, 0xf7, 0xa3,   0x1d, 0x7f, 0xff, 0x50, 0xe8, 0xf4, 0xfa, 0xfd

                org 0x6a00
                db 0xfa, 0xfd, 0xfa, 0x0f, 0x41, 0x30, 0x9c, 0x4f,   0xa5, 0xd8, 0xf5, 0xff, 0xff, 0x1f, 0x00, 0x80
                db 0xff, 0xaa, 0x00, 0xfa, 0xfd, 0xf0, 0x02, 0x1c,   0xf8, 0xa2, 0x15, 0x7f, 0xea, 0x40, 0x05, 0x2a
                db 0x5f, 0x30, 0x00, 0xff, 0xaf, 0x05, 0x50, 0xaa,   0xfd, 0x01, 0x00, 0xaa, 0xfe, 0xff, 0xbf, 0x2f
                db 0x4b, 0xa2, 0x34, 0x00, 0x40, 0x20, 0x90, 0x4e,   0xa5, 0xd8, 0xf5, 0x01, 0x03, 0x03, 0x01, 0x00
                db 0xff, 0xaa, 0x00, 0x8a, 0xe5, 0xf0, 0xe2, 0x0c,   0xf8, 0xa2, 0x15, 0x7f, 0xea, 0x40, 0x0f, 0x30
                db 0x40, 0x00, 0x00, 0xff, 0xaf, 0x05, 0xf0, 0x0e,   0x01, 0x3c, 0x3f, 0xaa, 0xfe, 0xff, 0xbf, 0x2f
                db 0xcb, 0x32, 0x8c, 0x00, 0x00, 0x00, 0x80, 0x40,   0xa0, 0xd8, 0xf5, 0x3f, 0x1f, 0x1f, 0x0f, 0x07

                db 0x00, 0x00, 0x00, 0xe2, 0xf9, 0xf0, 0xe0, 0xc0,   0x00, 0x02, 0x15

Joystuff:
maybe_prepare_screen equ 0x8339
print_text equ 0x836e
                xor a
                call maybe_prepare_screen
                ld hl, txt_joy
                call print_text

                ld de, 14
2               ld a, 0xf7
                in a, (0xfe)
                ld hl, joy_flags
                ld b, 4

1               rra
                jr nc, Joystuff_cont
                add hl, de
                djnz 1b
                jr 2b
Joystuff_cont
                ld a, (hl)
                inc hl
                ld (Ljoy_flag_001), a 
                ld (Ljoy_flag_002), a 
                ld a, (hl)
                ld (SMC_joy_flag_003a), a
                ld (SMC_joy_flag_003b), a
                inc hl
                ld a, (hl)
                ld (Ljoy_flag_004), a
                inc hl
                ld a, (hl)
                ld (Ljoy_flag_005), a
                inc hl
                ld a, (hl)
                ld (Ljoy_flag_006), a
                inc hl
                ld a, (hl)
                ld (Ljoy_flag_007), a
                inc hl
                ld a, (hl)
                ld (Ljoy_flag_008), a
                inc hl
                ld de, Joystick_fire
                ld bc, 18 ; hmmmm, why so much? there seem to be only 14-byte blocks
                ; possibly protek-cursor routine only?
                ldir
                ret

txt_joy
                db "4", 0x0e, 0x07, 0x47, "1.JOYSTICK 1"
                db 0xff, 0xff
                db "2.JOYSTICK 2"
                db 0xff, 0xff
                db "3.KEMPSTON"
                db 0xff, 0xff
                db "4.PROTEK OR CURSOR"
                db 0

joy_flags
                ; joystick 1
                db 0x01, 0x1e, 0x1f, 0x1d, 0x1c, 0x14, 0x15
                ld a, 0xef : in a, (0xfe) : bit 0, a : ret ; routine, pushed into Joystick_fire

                ; joystick 2
                db 0x10, 0x0f, 0x00, 0x15, 0x14, 0x1c, 0x1d
                ld a, 0xf7 : in a, (0xfe) : bit 4, a : ret ; routine, pushed into Joystick_fire

                ; joystick 3
                db 0x10, 0x0f, 0x00, 0x14, 0x15, 0x1c, 0x1d
                in a, (0x1f) : cpl : bit 4, a : ret : nop

                ; joystick 4
                db 0x01, 0x1e, 0x1f, 0x15, 0x14, 0x1d, 0x1c
                ld a, 0xf7 : in a, (0xfe) : or 0xef : rrca : rrca : rrca : ld c, a
                ld a, 0xef : in a, (0xfe) : and c   : bit 0, a : ret

                org 0x6b4d
                db 0x00, 0x00, 0x00
                db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x50
                db 0x02, 0x00, 0x01, 0x00, 0x03, 0x00, 0x02, 0x00,   0x04, 0x00, 0x04, 0x00, 0x05, 0x00, 0x07, 0x00
                db 0x06, 0x00, 0x10, 0x00, 0x07, 0x00, 0x20, 0x00,   0x08, 0x00, 0x50, 0x00, 0x09, 0x00, 0x70, 0x00
                db 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x01, 0x00,   0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x02, 0x50
                db 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x03, 0x50,   0x00, 0x00, 0x50, 0x00, 0x00, 0x01, 0x00, 0x00
                db 0x00, 0x05, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00,   0x00, 0x00, 0x00, 0x10, 0x9a, 0x82, 0x00, 0x00
                db 0x9b, 0x86, 0x00, 0x00, 0x9c, 0x8a, 0x00, 0x00,   0x9d, 0x8e, 0x00, 0x00, 0x9e, 0x92, 0x00, 0x00
                db 0x8b, 0xa2, 0x00, 0x00, 0x97, 0x96, 0x00, 0x00,   0x98, 0x9a, 0x00, 0x00, 0x99, 0x9e, 0x00, 0x00
                db 0x9f, 0x00, 0x5b, 0x00, 0xa0, 0x00, 0x5d, 0x01,   0x00, 0x00, 0xac, 0x00, 0x5f, 0x02, 0xa4, 0x00
                db 0x3d, 0x06, 0xad, 0xc2, 0x3f, 0x07, 0xa3, 0x00,   0x3a, 0x05, 0xa1, 0x00, 0x61, 0x03, 0xa2, 0x00
                db 0x63, 0x04, 0xa5, 0x82, 0x00, 0x00, 0xaa, 0x00,   0x00, 0x00, 0xab, 0x00, 0x00, 0x00, 0x8d, 0x00

                include "wip.asm"

	savesna "switchblade.sna", Start
